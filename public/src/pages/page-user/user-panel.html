
<link rel="import" href="./user-manage.html">
<dom-module id="user-panel">
    <style include="iron-flex iron-flex-factors iron-flex-alignment gl-styles">
            .btn{
                margin-bottom: 30px;
                margin-right: 30px;
            }
        </style>
    <template>
        <!--user-panel dsfgdfds-->
       // [[data.name]]//
        <user-manage data="{{data}}" ></user-manage>
            <div class="horizontal end-justified layout btn">
                <paper-button class="gl-btn-danger" on-tap="deleteData" raised>ลบ</paper-button>
                 <paper-button class="gl-btn-success" on-tap="saveData" raised>บันทึก</paper-button>
                <paper-button class="gl-btn-primary" on-tap="insertata" raised>เพิ่ม</paper-button>
            </div>
    </template>
    <script>
        Polymer({
            is: 'user-panel',
            behaviors: [
                g2gModelBehavior,
            ],
            properties:{
                data:{
                    type:Object,
                }
            },
            insertata(){
                let data = this.data;
                data.start_work_date = new Date (data.start_work_date).toISOString();
                console.log(data)
                
                this.insert('./user/insert',data, () => {
                    this.fire('get-user-list');
                    this.fire('_close-panel')
                    console.log(1)
                },(data) => {
                    console.log(data)
                    
                 });
            },
            deleteData(){
                this.delete('./user/delete/',this.data.id, () => {
                    this.fire('get-user-list');
                    this.fire('_close-panel');
                    // console.log(1)
                 });
            }
        });
    </script>
</dom-module>
