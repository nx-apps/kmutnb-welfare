
<dom-module id="user-manage">
    <style include="iron-flex iron-flex-factors iron-flex-alignment">
            div.label {
                text-align :right;
                padding-top: 9px;
                padding-right: 15px;
                padding-top: 17px;
            }
            gl-form-input,
            gl-combo-box,
            vaadin-date-picker {
                width: 60%;
            }
        </style>
    <template>
        <div class="container layout vertical ">
            
            <div class="from layout horizontal">
                <div class="label flex">คำนำหน้าชื่อ</div>
                <div class="input flex-2">
                    <gl-combo-box  no-label-float items="{{prefixname}}" value="{{data.prefixname_id}}" 
                                item-label-path="prefixname" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ชื่อ</div>
                <div class="input flex-2">
                    <gl-form-input no-label-float value="{{data.name}}" disabled="[[disable]]"></gl-form-input>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">นามสกุล</div>
                <div class="input flex-2">
                    <gl-form-input no-label-float value="{{data.surname}}" disabled="[[disable]]"></gl-form-input>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">เพศ</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{gender}}" value="{{data.gender_id}}" 
                                item-label-path="gender_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">วันที่เริ่มทำงาน</div>
                <div class="input flex-2">
                    <vaadin-date-picker always-float-label  value="{{data.start_work_date}}"></vaadin-date-picker>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ประเภทลูกจ้าง</div>
                <div class="input flex-2">
                   <gl-combo-box no-label-float items="{{type_employee}}" value="{{data.type_employee_id}}" 
                                item-label-path="type_emp_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">สถานณะการทำงานปัจจุบัน</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{active}}" value="{{data.active_id}}" 
                                item-label-path="active_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ตำแหน่ง</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{position}}" value="{{data.position_id}}" 
                                item-label-path="position_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ระดับทางวิชาการ</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{matier}}" value="{{data.matier_id}}" 
                                item-label-path="matier_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ตำแหน่งทางวิชาการ</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{academic}}" value="{{data.academic_id}}" 
                                item-label-path="academic_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            
            <div class="from layout horizontal">
                <div class="label flex">แผนก</div>
                <div class="input flex-2">[[_checkFaculty(data.department_id)]]
                    <gl-combo-box no-label-float items="{{department}}" value="{{data.department_id}}" 
                                item-label-path="department_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">คณะ</div>
                <div class="input flex-2">
                    <gl-combo-box no-label-float items="{{faculty}}" value="{{data.faculty_id}}" 
                                item-label-path="faculty_name" item-value-path="id" disabled></gl-combo-box>
                </div>
            </div>
            <div class="from layout horizontal">
                <div class="label flex">ความสัมพัธ์</div>
                <div class="input flex-2">
                   <gl-combo-box no-label-float items="{{relation}}" value="{{data.relation_id}}" 
                                item-label-path="relation_name" item-value-path="id" ></gl-combo-box>
                </div>
            </div>
            
            
        </div>
        
    </template>
    <script>
        Polymer({
            is: 'user-manage',
            behaviors:[ReduxBehavior],
            properties:{
                data:{
                    type:Object,
                    value:{},
                    notify:true
                },
                academic:{
                    statePath:'commonData.academic'
                },
                active:{
                    statePath:'commonData.active'
                },
                department:{
                    statePath:'commonData.department'
                },
                employee:{
                    statePath:'commonData.employee'
                },
                faculty:{
                    statePath:'commonData.faculty'
                },
                gender:{
                    statePath:'commonData.gender'
                },
                matier:{
                    statePath:'commonData.matier'
                },
                position:{
                    statePath:'commonData.position'
                },
                prefixname:{
                    statePath:'commonData.prefixname'
                },
                relation:{
                    statePath:'commonData.relation'
                },
                type_employee:{
                    statePath:'commonData.type_employee'
                }
            },
            _checkFaculty(dataSelete){
                console.log(dataSelete)
                if(dataSelete){
                let departmentID = this.department.find((departmentID)=>departmentID.id == dataSelete);
                console.log(departmentID)
                  let faculty_code = this.faculty.find((facultyID)=>facultyID.faculty_code == departmentID.faculty);
                 console.log(faculty_code)
                  this.set('data.faculty_id',faculty_code.id)
                  console.log(this.data.faculty_id)
                }
                
            }
        });
    </script>
</dom-module>

