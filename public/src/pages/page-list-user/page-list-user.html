<link rel="import" href="./../components/panel-right/panel-right.html">
<link rel="import" href="./user-list.html">
<link rel="import" href="./user-panel.html">
<link rel="import" href="./user-welfare.html">

<link rel="import" href="./../components/format-number-behavior.html">


<dom-module id="page-list-user">
      <style include="iron-flex iron-flex-factors iron-flex-alignment">
    :host {
      --paper-fab-background:var(--paper-light-blue-500);
      --paper-fab-keyboard-focus-background: var(--paper-light-blue-900);
    }
    *{
      font-family: 'CSChatThaiUI', sans-serif;
      -webkit-font-smoothing: antialiased;
    }
    paper-fab {
         position: fixed;
         right: 25px;
         bottom: 25px;
         color: #fff;
    }
    panel-right{
      background-color: var(--gl-white-color);
    }
    .user-list {
        margin-top: 30px;
        /*width: 80%;*/
    }
    user-list {
        width: 80%;
    }
    .sub-component {
        margin: 15px;
        width: 100%;
    }
  </style>
    <template>
        <div class="user-list horizontal center-justified layout">
            <user-list class="flex"></user-list>
        </div>

     <panel-right id="test" title="{{title}}" >
         <iron-pages selected="{{page}}">
             <div class="horizontal center-justified layout">
                <user-panel class="sub-component" data="[[dataSelete]]"></user-panel>
             </div>
             <div class="horizontal center-justified layout">
                <user-welfare class="sub-component"></user-welfare>
             </div>
                <section></section>
            </iron-pages>
         
      </panel-right>
      <paper-fab icon="add" title="เพิ่มสมาชิก" id="addQuota" on-tap="addUser"></paper-fab>
      <paper-tooltip for="addQuota" offset="0">เพิ่มสมาชิก</paper-tooltip>
    </template>
    <script>
        Polymer({
            is: 'page-list-user',
            properties:{
                page:{
                    type:Number,
                    value:0
                },
                title:{
                    type:String,
                    value:'เพิ่มสมาชิก'
                }
            },
            behaviors: [
                ReduxBehavior,nylonBehavior,commonDataAction,usersAction
            ],
            nylonPageActive(){
                this.dispatchAction('COMMONDATA_LIST');
                this.dispatchAction('USERS_LIST');
                this.dispatchAction('COMMONDATA_DATA_ACADEMIC');
                this.dispatchAction('COMMONDATA_DATA_ACTIVE');
                this.dispatchAction('COMMONDATA_DATA_DEPARTMENT');
                // this.dispatchAction('COMMONDATA_DATA_EMPLOYEE');
                this.dispatchAction('COMMONDATA_DATA_FACULTY');
                this.dispatchAction('COMMONDATA_DATA_GENDER');
                this.dispatchAction('COMMONDATA_DATA_MATIER');
                this.dispatchAction('COMMONDATA_DATA_POSITION');
                this.dispatchAction('COMMONDATA_DATA_PREFIXNAME');
                this.dispatchAction('COMMONDATA_DATA_RELATION');
                this.dispatchAction('COMMONDATA_DATA_TYPE_EMPLOYEE');
            },
            listeners: {
                '_get-user-edit': '_getUserEdit',
                '_get-user':'_getUser',
                // '_close-panel':'btn_closePanelRight'
            },
            addUser(){
                this.set('page',0)
                this.set('title','เพิ่มสมาชิก')
                this.dispatchAction('USER_BTN',false);
                this.dispatchAction('USER_INSERT_VIEW',true);
                this.btn_openPanelRight()
            },
            _getUser(e){
                this.set('page',1)
                this.set('title','ข้อมูลสมาชิก')
                this.dispatchAction('USER_GET_WELFARES',e.detail.id);
                console.log(e.detail)
            },
            _getUserEdit(e){
                this.set('page',0)
                this.dispatchAction('USER_SELECT',e.detail);
                this.dispatchAction('USER_BTN',true);
                this.dispatchAction('USER_INSERT_VIEW',false);
                this.$$('panel-right').open();
            },
            btn_openPanelRight(){
                this.set('dataSelete',{})
                this.$$('panel-right').open();
            },
            btn_closePanelRight(){
                this.set('dataSelete',{})
                this.$$('panel-right').close();
            }
        });
    </script>
</dom-module>
