<link rel="import" href="components/list-welfare.html">
<link rel="import" href="./components/list-user.html">

<dom-module id="page-admin-employee">
    <style is="custom-style" include="gl-color gl-table flex-style">
        paper-material {
            background-color: var(--gl-white-color);
        }
        .container{
            padding: 20px;
        }
        .table-detail {
            margin: auto;
            width: 70%;
        }
        .serachBox{
            margin: auto;
            width: 70%;
        }
        table.gl-table-default {
            border: 1px solid #ddd;
        }
    </style>
    <template>
        <div class="container serachBox">
            <paper-material elevation="1">
                <div style="padding: 10px">
                    <div class="container flex-horizontal-with-ratios">
                        <div class="flexchild"></div>
                        <div class="flex3child">
                            <gl-combo-box label="ชื่อสวัสดิการ" placeholder="มีสวัสดิการทั้งหมด {{list.length}} รายการ" items="{{list}}" item-label-path="group_welfare_name" item-value-path="id" value="{{selectWelfare}}">
                                  <template>
                                    <b>[[item.group_welfare_name]]</b><br>
                                    ปี: [[item.year]]
                                </template>
                            </gl-combo-box>
                        </div>
                        <div class="flexchild"></div>
                        <div class="flex3child">
                            <gl-combo-box label="ชื่อสวัสดิการย่อย" placeholder="มีสวัสดิย่อยการทั้งหมด {{subList.welfare.length}}" items="{{subList.welfare}}" item-label-path="welfare_name" item-value-path="id" value="{{selectSubWelfare}}"></gl-combo-box>
                        </div>
                        <div class="flexchild"></div>
                    </div>
                </div>
            </paper-material>
        </div>
        <section>
            <list-user></list-user>
        </section>
        
        
    </template>
    <script>
        Polymer({
            is: 'page-admin-employee',
            behaviors: [ReduxBehavior, nylonBehavior, userWelfareAction],
            observers:['select_welfare(selectWelfare)','select_sub_welfare(selectSubWelfare)'],
            properties: {
                list: {
                    statePath: 'userWelfare.list'
                },
                subList:{
                    statePath: 'userWelfare.list_id'
                }
            },
            listeners:{
                'back_page' : 'back_page'
            },
            showSubWelfare:function(subList){
                console.log('*',subList);
            },  
            nylonPageActive: function () {
                this.WELFARE_LIST();
                this.LIST_USER("");
            },
            select_welfare:function(data) {
               if(data != ""){
                   this.selectSubWelfare = "";
                   this.WELFARE_LIST_ID(data);
               }
            },
            select_sub_welfare:function(id){
                 this.LIST_USER(id);
            },
            back_page:function(){
                this.pages = 0;
            }
        });
    </script>
</dom-module>