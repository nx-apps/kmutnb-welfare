<link rel="import" href="components/welfare-panel.html">
<link rel="import" href="components/welfare-manage.html">

<dom-module id="page-welfare">
    <template>
        <style is="custom-style" include="gl-color gl-table iron-flex iron-flex-factors iron-flex-alignment">
            paper-material {
                background-color: var(--gl-white-color);
            }
            .table-detail {
                margin: auto;
                width: 50%;
                padding: 20px;
            }
            table.gl-table-default {
                border: 1px solid #ddd;
            }
        </style>
        <div class="horizontal end-justified layout">
            <paper-button raised style="margin: 20px" class="gl-btn-primary" on-tap="_insert">
                <iron-icon icon="add"></iron-icon>เพิ่มสวัสดิการ</paper-button>
        </div>
        <div class="container">
            <div class="table-detail">
                <paper-material elevation="1">
                    <table class="gl-table-default">
                        <thead class="table-head">
                            <tr>
                                <th>ชื่อสวัสดิการ</th>
                            </tr>
                        </thead>
                        <tbody class="table-body">
                            <template is="dom-repeat" items="{{list}}">
                                <tr data="[[item]]" on-tap="select_welfare">
                                    <td>{{item.name}}</td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </paper-material>
            </div>
        </div>

        <panel-right title="{{title}}">
            <iron-pages selected="{{pages}}">
                <div>
                    <welfare-panel></welfare-panel>
                </div>
                <div>
                    <welfare-manage data="{{dataSelect}}"></welfare-manage>
                </div>
            </iron-pages>
        </panel-right>


    </template>
    <script>
        Polymer({
            is: 'page-welfare',
            behaviors: [ReduxBehavior, nylonBehavior, welfareAction],
            properties: {
                list: {
                    statePath: 'welfare.list',
                },
                pages: {
                    type: Number,
                    value: 0
                }
            },
            listners:
            { 'closePanel': 'close_panel' }
            ,
            nylonPageActive: function () {
                // this.dispatchAction('WELFARE_LIST');
                this.WELFARE_LIST();
            },
            _insert: function () {
                this.$$('panel-right').open();
                this.pages = 0;
                this.set('title', this.title = "เพิ่มสวัสดิการ");
            },
            select_welfare: function (e) {
                this.$$('panel-right').open();
                this.dataSelect = e.currentTarget.data;
                this.pages = 1;
                this.set('title', this.title = "ข้อมูลสวัสดิการ");
                // console.log(e.currentTarget.data);
            },
            close_panel: function () {
                this.$$('panel-right').close();
            }
        });
    </script>
</dom-module>